<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Modern Boy's Red Roof House</title>
    <style>
        /* 1. ì „ì²´ í™”ë©´ ì„¤ì • */
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            background-color: #f4f1ea;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Apple SD Gothic Neo', sans-serif;
        }

        /* 2. ê·¸ë¦¼ ì•¡ì */
        .art-container {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 800px;
            overflow: hidden;
        }

        /* 3. ë ˆì´ì–´ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .layer {
            position: absolute;
            top: -20%;
            left: -20%;
            width: 140%;
            height: 140%;
            
            /* â­ ìˆ˜ì •ë¨: ë°”ë‹¥ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ê¸´ ê·¸ë¦¼ ê¹¨ì§ ë°©ì§€) â­ */
            background-size: 100% auto; 
            background-position: center; 
            background-repeat: no-repeat;
            
            transition: transform 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* ë°˜ì‘ ì†ë„ ì‚´ì§ ëŠ¦ì¶°ì„œ ë” ë¶€ë“œëŸ½ê²Œ */
            will-change: transform;
        }

        /* 4. ì´ë¯¸ì§€ ê²½ë¡œ */
        .bg { background-image: url('bg.png'); z-index: 1; }
        .mid { background-image: url('mid.png'); z-index: 2; }
        .fore { background-image: url('fore.png'); z-index: 3; }

        /* 5. ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #permissionBtn {
            position: absolute;
            z-index: 100;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #a63737;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: opacity 0.3s;
        }
    </style>
</head>
<body>

    <div class="art-container" id="artContainer">
        <div class="layer bg" data-speed="1"></div>   <div class="layer mid" data-speed="2"></div>  <div class="layer fore" data-speed="4"></div> </div>

    <button id="permissionBtn">ë“¤ì–´ê°€ê¸°(Touch)</button>

    <script>
        const btn = document.getElementById('permissionBtn');
        const layers = document.querySelectorAll('.layer');
        const container = document.getElementById('artContainer');
	const bgm = document.getElementById('bgm'); // ìŒì•… í”Œë ˆì´ì–´ ê°€ì ¸ì˜¤ê¸°

        // ì›€ì§ì„ ì²˜ë¦¬ í•¨ìˆ˜
        function moveLayers(x, y) {
            layers.forEach(layer => {
                const speed = layer.getAttribute('data-speed');
                const xMove = -(x * speed); 
                const yMove = -(y * speed);
                layer.style.transform = `translate(${xMove}px, ${yMove}px)`;
            });
        }
	// ìŒì•…ì´ ì„œì„œíˆ ì¼œì§€ëŠ” í•¨ìˆ˜
function fadeInAudio(audio) {
    audio.volume = 0; // 0ì—ì„œ ì‹œì‘
    audio.play();
    let vol = 0;
    const interval = setInterval(() => {
        if (vol < 0.8) {
            vol += 0.05;
            audio.volume = vol;
        } else {
            clearInterval(interval);
        }
    }, 200);
}

        // ëª¨ë°”ì¼ ì„¼ì„œ ì²˜ë¦¬
        function handleOrientation(event) {
            const x = event.gamma; 
            const y = event.beta;  
            
            if (x && y) {
                // ê°ë„ ì œí•œ
                const limitedX = Math.max(-40, Math.min(40, x));
                const limitedY = Math.max(-40, Math.min(40, y));
                
                // â­ ìˆ˜ì •ë¨: 0.5 -> 0.15 (ì„¼ì„œ ë¯¼ê°ë„ë¥¼ í™• ë‚®ì¶¤) â­
                // ì´ì œ í°ì„ ë§ì´ ê¸°ìš¸ì—¬ì•¼ ì¡°ê¸ˆ ì›€ì§ì…ë‹ˆë‹¤.
                moveLayers(limitedX * 0.25, limitedY * 0.25); 
            }
        }

        // PC ë§ˆìš°ìŠ¤ ì²˜ë¦¬
        container.addEventListener('mousemove', (e) => {
            // â­ ìˆ˜ì •ë¨: ë‚˜ëˆ„ëŠ” ìˆ˜ë¥¼ 20 -> 50ìœ¼ë¡œ ëŠ˜ë ¤ì„œ ë§ˆìš°ìŠ¤ ë°˜ì‘ ë‘”í•˜ê²Œ ë§Œë“¦
            const x = (window.innerWidth / 2 - e.pageX) / 50;
            const y = (window.innerHeight / 2 - e.pageY) / 50;
            moveLayers(x, y);
        });

        // ê¶Œí•œ ìš”ì²­
        function requestAccess() {
            btn.style.opacity = '0';
            setTimeout(() => { btn.style.display = 'none'; }, 300);
		
		fadeInAudio(bgm); // ğŸµ ìŒì•… ì¬ìƒ ì‹œì‘!

            if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(permissionState => {
                        if (permissionState === 'granted') {
                            window.addEventListener('deviceorientation', handleOrientation);
                        } else {
                            alert('ì„¼ì„œ ê¶Œí•œì„ í—ˆìš©í•´ì•¼ ê·¸ë¦¼ì´ ì›€ì§ì…ë‹ˆë‹¤.');
                        }
                    })
                    .catch(console.error);
            } else {
                window.addEventListener('deviceorientation', handleOrientation);
            }
        }

        btn.addEventListener('click', requestAccess);
        
        if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission !== 'function') {
             window.addEventListener('deviceorientation', handleOrientation);
             btn.style.display = 'none';
        }

	<audio id="bgm" loop>
    		<source src="music.mp3" type="audio/mp3">
	</audio>
    </script>
</body>
</html>